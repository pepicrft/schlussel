{% include 'head' %}
<div class="grain" aria-hidden="true"></div>
<header class="topbar">
  <div class="brand">ðŸ”‘ schlussel</div>
  <button class="nav__toggle" aria-expanded="false" aria-label="Toggle navigation">â˜°</button>
  <nav class="nav" id="primary-nav">
    <a href="#manifesto">Manifesto</a>
    <a href="#capabilities">Capabilities</a>
    <a href="#getting-started">Getting started</a>
    <a href="#formulas">Formulas</a>
    <a href="#bindings">Bindings</a>
    <a href="/notes/">Notes</a>
    <a class="nav__cta" href="https://github.com/pepicrft/schlussel">Get started</a>
  </nav>
</header>

<main>
  <section class="hero">
    <div class="hero__orb" aria-hidden="true"></div>
    <div class="hero__content">
      <p class="hero__eyebrow">Agent authentication runtime</p>
      <h1>Auth runtime for every agent</h1>
      <p class="hero__lead">
        Codify how users authenticate, guide them through the right steps, and
        keep sessions safe with native storage and locked refreshes across macOS,
        Linux, and Windows.
      </p>
      <div class="hero__actions">
        <a class="cta" href="#manifesto">Read the manifesto</a>
        <a class="cta cta--ghost" href="#formulas">Inspect formulas</a>
      </div>
    </div>
  </section>

  <section id="manifesto" class="section manifesto">
    <div class="section__title">
      <h2>Manifesto</h2>
      <p>One key, many agents, zero split-brain sessions.</p>
    </div>
    <div class="section__body">
      <p>
        Every runtime has rebuilt its own auth client and repeated the same
        mistakes, from brittle refresh logic to token storage that drifts across
        platforms. As agents scale across CI fleets, workspaces, and long-lived
        loops, they now race each other for session access, and without locked
        refreshes, one process invalidates another.
      </p>
      <p>
        We believe there should be one disciplined solution, built in a
        cross-compile friendly language like Zig, and shipped as a library and
        CLI that can target every platform without reimplementation.
        That single core should codify auth methods and user steps, then be bound
        to the many languages that exist so every tool shares the same session
        logic, storage semantics, and refresh guarantees.
      </p>
    </div>
  </section>

  <section id="capabilities" class="section features">
    <div class="section__title">
      <h2>Capabilities</h2>
      <p>Minimal surface area. Maximum discipline.</p>
    </div>
    <div class="features__grid">
      <article>
        <h3>Session lifecycle guards</h3>
        <p>Refresh tokens run through serialized guards so race conditions never cancel another process's handshake.</p>
        <p>Scalable locking scopes keep throughput high while sticking to a single source of truth.</p>
      </article>
      <article>
        <h3>Scripts</h3>
        <p>Formulas emit scripts, then resolve into concrete steps: open a URL, enter a code, wait for a callback.</p>
        <p>Agents can render the exact steps and execute them consistently.</p>
      </article>
      <article>
        <h3>Native storage</h3>
        <p>Each OS puts secrets in its own credential manager, so users recognize the surface.</p>
        <p>The CLI never invents yet another vault, it just speaks the native language.</p>
      </article>
    </div>
  </section>

  <section id="getting-started" class="section getting-started">
    <div class="section__title">
      <h2>Getting started</h2>
      <p>Pick your way to consume Schlussel across CLIs, libraries, and bindings.</p>
    </div>
    <div class="gs__grid">
      <article>
        <h3>Install CLI</h3>
        <p>Bring the CLI to your agent fleet for OAuth2 methods and guided onboarding.</p>
        <p class="gs__note">Clone, build with Zig, run <code>schlussel script</code> and <code>schlussel run</code>, and tokens land in the OS credential manager with locking to avoid dueling refreshes.</p>
      </article>
      <article>
        <h3>Use the Zig library</h3>
        <p>Embed the library and reuse the same formulas, steps, and storage backends.</p>
        <p class="gs__note">Add the dependency in <code>build.zig.zon</code>, import <code>schlussel</code>, and use the same <code>OAuthConfig</code> helpers; refresh orchestration and locks mirror the CLI behavior.</p>
      </article>
      <article>
        <h3>Use bindings</h3>
        <p>Choose the binding that fits your runtime and keep recipes in sync.</p>
        <p class="gs__note">Bindings for Wasm, Python, Ruby, Elixir, Swift (and more) reuse the same formulas, scopes, and locking model.</p>
      </article>
    </div>
  </section>

  <section id="bindings" class="section bindings">
    <div class="section__title">
      <h2>Bindings</h2>
      <p>Ship Schlussel across runtimes and keep every agent speaking the same session language.</p>
    </div>
    <div class="bindings__grid">
      <div class="binding-card">
        <img src="/img/webassembly.svg" alt="WebAssembly logo" />
        <span>Browser (Wasm)</span>
      </div>
      <div class="binding-card">
        <img src="/img/node.svg" alt="Node logo" />
        <span>Node</span>
      </div>
      <div class="binding-card">
        <img src="/img/bun.svg" alt="Bun logo" />
        <span>Bun</span>
      </div>
      <div class="binding-card">
        <img src="/img/deno.svg" alt="Deno logo" />
        <span>Deno</span>
      </div>
      <div class="binding-card">
        <img src="/img/python.svg" alt="Python logo" />
        <span>Python</span>
      </div>
      <div class="binding-card">
        <img src="/img/ruby.svg" alt="Ruby logo" />
        <span>Ruby</span>
      </div>
      <div class="binding-card">
        <img src="/img/elixir.svg" alt="Elixir logo" />
        <span>Elixir</span>
      </div>
      <div class="binding-card">
        <img src="/img/swift.svg" alt="Swift logo" />
        <span>Swift</span>
      </div>
    </div>
  </section>

  <section id="formulas" class="section formulas">
    <div class="section__title">
      <h2>Formulas:</h2>
      <p>Declarative formulas that instruct the library on each IdP.</p>
    </div>
    <div class="formulas__grid">
      <div class="formula-card">
        <h3>First-party</h3>
        <p>Compiled formulas for GitHub, Google, Microsoft, GitLab, Tuist, and now Claude &amp; Codex.</p>
        <p>Versioned with the library, no configuration required for the supported methods.</p>
      </div>
      <div class="formula-card">
        <h3>Third-party</h3>
        <p>Drop JSON on disk or pipe a custom file when your IdP behaves differently.</p>
        <p>Formulas describe methods, endpoints, scopes, registration steps, and user guidance.</p>
      </div>
      <div class="formula-card">
        <h3>Onboarding</h3>
        <p>Each formula lists how to register a client, request API keys, and nail redirect URIs.</p>
        <p>Dynamic registration endpoints capture providers such as Claude that mint CLI keys without a dashboard form.</p>
      </div>
    </div>
    <div class="formula-example">
      <pre><code class="language-json">{
  "schema": "v1",
  "id": "claude",
  "label": "Claude Code (Anthropic)",
  "methods": ["authorization_code"],
  "endpoints": {
    "authorize": "https://console.anthropic.com/oauth/authorize",
    "token": "https://console.anthropic.com/v1/oauth/token"
  },
  "scope": "user:profile user:inference user:sessions:claude_code",
  "public_clients": [
    {
      "name": "claude-code",
      "id": "9d1c250a-e61b-44d9-88ed-5944d1962f5e",
      "source": "https://github.com/anthropics/claude-code",
      "methods": ["authorization_code"]
    }
  ],
  "script": {
    "register": {
      "url": "https://console.anthropic.com",
      "steps": [
        "Sign up for an Anthropic account at https://console.anthropic.com",
        "A Claude Pro, Max, Team, or Enterprise subscription is required for Claude Code access"
      ]
    },
    "steps": [
      { "type": "open_url", "value": "{authorize_url}" },
      { "type": "wait_for_callback" }
    ]
  }
}</code></pre>
    </div>
  </section>
</main>

<footer id="license" class="footer">
  <p>schlussel â€” guided auth, safe sessions.</p>
  <p><a href="/LICENSE">MIT License</a> Â© 2025 pepicrft.</p>
</footer>
{% include 'footer' %}
