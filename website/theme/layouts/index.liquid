{% include 'head' %}
<div class="grain" aria-hidden="true"></div>
<header class="topbar">
  <div class="brand">ðŸ”‘ schlussel</div>
  <button class="nav__toggle" aria-expanded="false" aria-label="Toggle navigation">â˜°</button>
  <nav class="nav" id="primary-nav">
    <a href="#manifesto">Manifesto</a>
    <a href="#capabilities">Capabilities</a>
    <a href="#getting-started">Getting started</a>
    <a href="#formulas">Formulas</a>
    <a href="#bindings">Bindings</a>
    <a href="/notes/">Notes</a>
    <a class="nav__cta" href="https://github.com/pepicrft/schlussel">Get started</a>
  </nav>
</header>

<main>
  <section class="hero">
    <div class="hero__orb" aria-hidden="true"></div>
    <div class="hero__content">
      <p class="hero__eyebrow">Universal OAuth2 client for concurrent agents</p>
      <h1>Deterministic coordination across every platform</h1>
      <p class="hero__lead">
        Universal, cross-platform OAuth 2.0 clientâ€”library + CLIâ€”written in Zig
        to keep agents from undoing each other. Unified locking, PKCE, and device-code
        flows with OS-native token storage keep every refresh serialized across
        macOS, Linux, and Windows so agents can swarm without invalidating
        shared tokens.
      </p>
      <div class="hero__actions">
        <a class="cta" href="#manifesto">Read the manifesto</a>
        <a class="cta cta--ghost" href="#formulas">Inspect formulas</a>
      </div>
    </div>
  </section>

  <section id="manifesto" class="section manifesto">
    <div class="section__title">
      <h2>Manifesto</h2>
      <p>One key, many agents, zero split-brain sessions.</p>
    </div>
    <div class="section__body">
      <p>
        Modern CLIs are no longer solo applications; they are agents coordinating
        across CI fleets, workspaces, and autopilot loops. Without a unified,
        platform-agnostic session catalog, every process risks refreshing the
        same token simultaneously and invalidating the credentials it shares.
        Schlussel keeps the handshake deterministic with shared locks, native
        storage, and built-in refresh discipline.
      </p>
      <p>
        Deploying an OAuth2 client should never mean reimplementing refresh
        choreography. If your tool needs an OAuth2 library or CLI, Schlussel
        provides both with an opinionated stack that speaks the same language as
        every agent, runtime, and operating system.
      </p>
    </div>
  </section>

  <section id="capabilities" class="section features">
    <div class="section__title">
      <h2>Capabilities</h2>
      <p>Minimal surface area. Maximum discipline.</p>
    </div>
    <div class="features__grid">
      <article>
        <h3>Cross-process safekeeping</h3>
        <p>Refresh tokens run through serialized guards so race conditions never cancel another process's handshake.</p>
        <p>Scalable locking scopes keep throughput high while sticking to a single source of truth.</p>
      </article>
      <article>
        <h3>Native storage</h3>
        <p>Each OS puts secrets in its own credential managerâ€”Keychain, Credential Manager, libsecretâ€”so users recognize the surface.</p>
        <p>The CLI never invents yet another vault, it just speaks the native language.</p>
      </article>
      <article>
        <h3>Formula-first workflows</h3>
        <p>Bundled formulas describe flows, endpoints, required scopes, and registration steps.</p>
        <p>Future-proof custom providers with third-party JSON or dynamic registration.</p>
      </article>
    </div>
  </section>

  <section id="getting-started" class="section getting-started">
    <div class="section__title">
      <h2>Getting started</h2>
      <p>Pick your way to consume Schlussel across CLIs, libraries, and bindings.</p>
    </div>
    <div class="gs__grid">
      <article>
        <h3>Install CLI</h3>
        <p>Bring the CLI to your agent fleet for device and authorization-code flows.</p>
        <p class="gs__note">Clone, build with Zig, run <code>schlussel login &lt;provider&gt;</code>, and tokens land in the OS credential manager with locking to avoid dueling refreshes.</p>
      </article>
      <article>
        <h3>Use the Zig library</h3>
        <p>Embed the library and reuse the same formulas and storage backends.</p>
        <p class="gs__note">Add the dependency in <code>build.zig.zon</code>, import <code>schlussel</code>, and use the same <code>OAuthConfig</code> helpers; refresh orchestration and locks mirror the CLI behavior.</p>
      </article>
      <article>
        <h3>Use bindings</h3>
        <p>Choose the binding that fits your runtime and keep recipes in sync.</p>
        <p class="gs__note">Bindings for Wasm, Python, Ruby, Elixir, Swift (and more) reuse the same formulas, scopes, and locking model.</p>
      </article>
    </div>
  </section>

  <section id="bindings" class="section bindings">
    <div class="section__title">
      <h2>Bindings</h2>
      <p>Ship Schlussel across runtimes and keep every agent speaking the same session language.</p>
    </div>
    <div class="bindings__grid">
      <div class="binding-card">
        <img src="/img/webassembly.svg" alt="WebAssembly logo" />
        <span>Browser (Wasm)</span>
      </div>
      <div class="binding-card">
        <img src="/img/python.svg" alt="Python logo" />
        <span>Python</span>
      </div>
      <div class="binding-card">
        <img src="/img/ruby.svg" alt="Ruby logo" />
        <span>Ruby</span>
      </div>
      <div class="binding-card">
        <img src="/img/elixir.svg" alt="Elixir logo" />
        <span>Elixir</span>
      </div>
      <div class="binding-card">
        <img src="/img/swift.svg" alt="Swift logo" />
        <span aria-hidden="true"></span>
      </div>
    </div>
  </section>

  <section id="formulas" class="section formulas">
    <div class="section__title">
      <h2>Declarative formulas</h2>
      <p>Portable OAuth recipes stored in the filesystem and fused into the binary.</p>
    </div>
    <div class="formulas__grid">
      <div class="formula-card">
        <h3>First-party</h3>
        <p>Compiled formulas for GitHub, Google, Microsoft, GitLab, Tuist, and now Claude &amp; Codex.</p>
        <p>Versioned with the library, no configuration required for the supported workflows.</p>
      </div>
      <div class="formula-card">
        <h3>Third-party</h3>
        <p>Drop JSON on disk or pipe a custom file when your IdP behaves differently.</p>
        <p>Formulas describe flows, endpoints, scopes, registration steps, and quirks.</p>
      </div>
      <div class="formula-card">
        <h3>Onboarding</h3>
        <p>Each formula lists how to register a client, request API keys, and nail redirect URIs.</p>
        <p>Dynamic registration endpoints capture providers such as Claude that mint CLI keys without a dashboard form.</p>
      </div>
    </div>
    <div class="formula-example">
      <div class="formula-example__text">
        <h3>Example formula</h3>
        <p>Endpoints, flows, scopes, and quirks stay in a single schema so agents read the same playbook.</p>
        <p>Providers that deviateâ€”slack nested responses, Claude role configs, Codex model hints, Tuist token nestingâ€”are handled explicitly.</p>
      </div>
      <pre><code>{
  "id": "claude",
  "label": "Claude Code",
  "flows": ["authorization_code"],
  "endpoints": {
    "authorize": "https://claude.ai/oauth/authorize",
    "token": "https://console.anthropic.com/v1/oauth/token"
  },
  "scopes": ["user:profile","user:inference","org:create_api_key"],
  "onboarding": {
    "register_url": "https://console.anthropic.com/oauth/clients",
    "steps": [
      "Register your CLI client in the Claude Console.",
      "Wire up schlussel://oauth-callback or http://127.0.0.1/callback and include the CLI scopes.",
      "Use the CLI API key endpoint to mint credentials and drop the secret into Schlussel."
    ]
  },
  "quirks": {
    "dynamic_registration_endpoint": "https://api.anthropic.com/api/oauth/claude_cli/create_api_key",
    "extra_fields": ["roles"]
  }
}</code></pre>
    </div>
  </section>
</main>

<footer id="license" class="footer">
  <p>schlussel â€” engineered for disciplined concurrency.</p>
  <p><a href="/LICENSE">MIT License</a> Â© 2025 pepicrft.</p>
</footer>
{% include 'footer' %}
